export default class e extends HTMLElement{constructor(e){super();const t=this;t.flag=e,t.events={},t.container=t,t.handle(),t.filteredAttributes=[]}async importTpl(e,t="default"){let r=await import(e);this.tpls=r[t]}getTpl(e){if(this.tpls)return this.tpls[e]??""}markup(e,t=!0){let r=document.createDocumentFragment(),n=(new DOMParser).parseFromString(e,"text/html");return t?(r.append(...n.body.children),r):n.body.children}setProperty(e,t){this.style.setProperty(e,t)}appendTpl(e){this.shadow.innerHTML=e(),this.fillAttributes()}attr(e,t){const r=this;if(r.hasAttribute(e))return t?void r.setAttribute(e,t):r.getAttribute(e)}fillAttributes(){const e=this;for(let t=0;t<e.attributes.length;t++){let r=e.attributes[t];"style"!=r.name&&"id"!=r.name&&(e.filteredAttributes.indexOf(r.name)>-1||e.setProperty(`--${r.name}`,r.value))}}on(e,t){const r=this;return r.events[e]||(this.events[e]=[]),this.events[e].push(t),"dev"===r.flag&&console.warn(`Referring to an event: ${e}.Handler: ${t.name}`),r}trigger(e,t){const r=this;return new Promise((function(n){"dev"===r.flag&&console.log(`Trigger event: ${e} with data: "${t}" `);try{r.events[e]&&r.events[e].forEach((async e=>n(await e(t))))}catch(t){if("TypeError"==t.name){let r={};r.err=t,r.event=e,r.line=t.lineNumber,console.log("%c%s","background-color:#3f51b5;",`!РћР±СЂР°С‰РµРЅРёРµ Рє СЃРѕР±С‹С‚РёСЋ, РєРѕС‚РѕСЂРѕРµ РЅРµ РѕРїСЂРµРґРµР»РµРЅРѕ ${componentName}: ${e}\n${t}`)}}}))}remove(e,t){const r=this;r.events[e]&&delete r.events[e]}clear(){const e=this;for(let t in e.events)"includeModule"!==t&&"showMenu"!==t&&delete e.events[t]}ascent(e,t){const r=this;let n=e.composedPath();if(n.length)for(let e=0,a=n.length;e<a;e++){let a=n[e];if(!a==r.container||!a||!a.tagName)break;if(a.classList.contains(t))return a}}triggerWithEvent(e,t){const r=this;if(!e.item)return;e.item.dataset[t].split(";").forEach((t=>{r.trigger(t,e)}))}prepareHandler(e,t){const r=this;let n=e.composedPath();if(n.length)for(let a=0,i=n.length;a<i;a++){let i=n[a];if(!i==r.container||!i||!i.tagName)break;if(i.hasAttribute(`data-${t}`)){r.triggerWithEvent({item:i,event:e},t);break}}}clickHandler(e){return this.prepareHandler(e,"click")}focusOutHandler(e){return this.prepareHandler(e,"focusout")}changeHandler(e){return this.prepareHandler(e,"change")}inputHandler(e){return this.prepareHandler(e,"input")}keyUpHandler(e){let t=e.target;"keyup"in t.dataset&&_.triggerWithEvent({item:t,event:e},"keyup")}submitHandler(e){console.log("s");const t=this;e.preventDefault();let r=e.composedPath();if(r.length)for(let n=0,a=r.length;n<a;n++){let a=r[n];if(!a==t.container||!a||!a.tagName)break;if(a.hasAttribute("data-submit"))return void console.log(e)}}scrollHandler(e){let t=e.target;if(t.dataset)return"scroll"in t.dataset?_.triggerWithEvent({item:t,event:e},"scroll"):void 0}overHandler(e){let t=e.target;"over"in t.dataset&&_.triggerWithEvent({item:t,event:e},"over")}dragStartHandler(e){let t=e.target;"dragStart"in t.dataset&&_.triggerWithEvent({item:t,event:e},"dragStart")}dragOverHandler(e){let t=e.target;"dragOver"in t.dataset&&_.triggerWithEvent({item:t,event:e},"dragOver")}dragEnterHandler(e){let t=e.target;"dragEnter"in t.dataset&&_.triggerWithEvent({item:t,event:e},"dragEnter")}dragLeaveHandler(e){let t=e.target;"dragLeave"in t.dataset&&_.triggerWithEvent({item:t,event:e},"dragLeave")}dropHandler(e){let t=e.target;"drop"in t.dataset&&_.triggerWithEvent({item:t,event:e},"drop")}outHandler(e){let t=e.target;"out"in t.dataset&&_.triggerWithEvent({item:t,event:e},"out")}leaveHandler(e){let t=e.target;t instanceof HTMLElement&&t.hasAttribute("data-leave")&&"leave"in t.dataset&&_.triggerWithEvent({item:t,event:e},"leave")}handle(){const e=this;e.container.addEventListener("focusout",e.focusOutHandler),e.container.addEventListener("submit",e.submitHandler),e.container.addEventListener("click",e.clickHandler.bind(e)),e.container.addEventListener("change",e.changeHandler),e.container.addEventListener("input",e.inputHandler),e.container.addEventListener("keyup",e.keyUpHandler),e.container.addEventListener("mouseover",e.overHandler),e.container.addEventListener("mouseout",e.outHandler),e.container.addEventListener("mouseleave",e.leaveHandler),e.container.addEventListener("dragstart",e.dragStartHandler),e.container.addEventListener("dragenter",e.dragEnterHandler),e.container.addEventListener("dragleave",e.dragLeaveHandler),e.container.addEventListener("dragover",e.dragOverHandler),e.container.addEventListener("drop",e.dropHandler),e.container.addEventListener("scroll",e.scrollHandler)}}